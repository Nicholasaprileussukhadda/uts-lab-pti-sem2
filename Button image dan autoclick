<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>CapyGotcha</title>
    <link hrel="stylesheet" src="autoclick.css">
</head>
<body>
      <div class="level-up-bar">
        <progress class="progress-bar" min="0" max="100" value="100"></progress>
        <div class="level-text">Level 1</div>
      </div>
      <div id="MoneyCounter">
        <p>
          <img src="images/food.png" id="a">
          <output type="inline" id="MoneyValue" value="0">0</output>
        </p>
        <button id="b">Autoclick 1</button>
        <button id="c">Autoclick 2</button>
        <button onclick="showImage()">Show Image</button>
        <img src="image.jpg" id="myImage" style="display:none;">
        <button onclick="showImage1()">Show Image</button>
        <img src="image.jpg" id="myImage1" style="display:none;">
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModal">Item Shop</button>
        <div class="modal" id="myModal">
            <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                          <h4 class="modal-title">Item Shop</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-sm-6 d-grid mx-auto">
                                
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                    </div>
                  </div>
            </div>
        </div>
      </div>
      
    <script>
      var money = 0;
      var counter = 0;
      var counter1 = 0;

      const progressBar = document.querySelector('.progress-bar');
			const levelText = document.querySelector('.level-text');

			let currentLevel = 1;
			let currentExp = 0;
			let maxExp = 100;

      function updateLevel() {
 			 	currentLevel++;
  			currentExp = 0;
  			maxExp = currentLevel * 100;
  			levelText.textContent = `Level ${currentLevel}`;
			}

			function updateExp(amount) {
  			currentExp += amount;
  			if (currentExp >= maxExp) {
    			updateLevel();
  			}
  			progressBar.style.width = `${(currentExp / maxExp) * 100}%`;
			}	

        function increaseMoney() {
          document.getElementById("MoneyValue").value = money;
          money += 1;
          updateExp(10);
          if (document.getElementById("myImage").style.display === "block") {
            money += 3;
            
          }else if (document.getElementById("myImage1").style.display === "block") {
            money += 10;
            
          }
        }
      
        const button = document.getElementById("b");
        button.addEventListener("click", function() {
          if (money >= 5) {
            money-=5;
            var interval = setInterval(function() {
              increaseMoney();
            }, 100);
      
            button.disabled = true;
            setTimeout(function() {
              clearInterval(interval);
              button.disabled = false;
            }, 10000);
          } else {
            alert("Not enough money");
          }
        });
      
        const ba = document.getElementById("c");
        ba.addEventListener("click", function() {
          if (money >= 50) {
            money-=50;
            var interval = setInterval(function() {
              increaseMoney();
            }, 100);
      
            ba.disabled = true;
            setTimeout(function() {
              clearInterval(interval);
              ba.disabled = false;
            }, 10000);
          } else {
            alert("Not enough money");
          }
        });

        function showImage() {
          if (money >= 50 && counter < 1 && currentLevel >= 2) {
            document.getElementById("myImage").style.display = "block";
            money -= 50;
            increaseMoney();
            counter++;
          }else if (currentLevel< 2){
              alert("Level terlalu rendah !");
          } else if (counter === 1) {
            alert("Already sold out !");
            document.getElementById("myButton").disabled = true;
          } else {
            alert("Not enough money.");
          }
        }

        function showImage1() {
          if (money >= 100 && counter1 <1 && currentLevel >=3) {
            document.getElementById("myImage1").style.display = "block";
            money -= 100;
            increaseMoney();
            counter1++;
          }else if (currentLevel< 3){
            alert("Level terlalu rendah !");
          } else if (counter1 === 1) {
            alert("Already sold out !");
            document.getElementById("myButton").disabled = true;
          } else {
            alert("Not enough money.");
          }
        }

        const image = document.getElementById("a");
        image.addEventListener("click", increaseMoney);
        
        var modal = document.getElementById("myModal");
    		var btn = document.getElementById("myBtn");
    		var span = document.getElementsByClassName("close")[0];
    		btn.onclick = function() {
        		modal.style.display = "block";
    		}
    		span.onclick = function() {
        		modal.style.display = "none";
    		}               
    		window.onclick = function(event) {
        		if (event.target == modal) {
           		 	modal.style.display = "none";
        		}
    		}
		

      </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
