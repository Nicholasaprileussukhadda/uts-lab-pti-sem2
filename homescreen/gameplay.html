<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Missyue Clicker | Gameplay</title>
    <link hrel="stylesheet" src="autoclick.css">
</head>
<body>
  <audio id="bg-music" src="audio/mixue.mp3" volume="0.5" loop></audio>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="../homescreen/gameplay.html">Missyue Clicker</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="../title/title.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../about/about.html">About Us</a>
          </li>
        </ul>
      </div>
      <div class="music">
        <h4>Music: </h4>
        <label class="music-toggle" for="toogle-music"></label>
        <input type="checkbox" id="toogle-music" class="hidden-checkbox"></input>
        <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="0.5"></input>
      </div>
    </div>
  </nav>
  <div id="clock" style="background-color: blanchedalmond; text-align:center;"></div>
  <div id="display-name" style="text-align: center"> </div>
  <div class="bg-image" style="background-image: url('images/bg-home.gif'); background-size: cover; background-attachment:fixed;background-repeat: no-repeat;max-height: fit-content ;padding: 20px;">
   <br><br><br>
    <div id="container-fluid mt-3" class="container" style="background-color: azure;padding:20px;border-radius: 30px;"> 
      <div class="row">
        <div class="col-sm-2" align="center" id="row1">
          <div id="MoneyCounter">
            <p>
              <img src="../images/food.png" id="a">
              <output type="inline" id="MoneyValue" value="0">0</output>
            </p>
          </div>
        </div>
        <div class="col-sm-10" align="center">
          <div class="level-up-bar">
            <div id="progress-bar" class="progress">
              <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar"
                aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">
              </div>
            </div>
            <div class="level-text">Level 1</div>
          </div>          
          <div class="row">
          <div class="col-sm-6" align="center">
            <h4>Pilih Jenis Autoclicks</h4>
            <div class="row">
              <div class="col-sm-4">
                <img src="../images/food.png"><p>5</p>
                <button class="btn btn-primary" id="b">Autoclick 1</button>
              </div>
              <div class="col-sm-4">
                <img src="../images/food.png"><p>50</p>          
                <button class="btn btn-primary" id="c">Autoclick 2</button>  
              </div>
              <div class="col-sm-4">
                <img src="../images/food.png"><p>500</p>          
                <button class="btn btn-primary" id="h">Autoclick 3</button>  
              </div>
            </div>
          </div>
          <div class="col-sm-6" align="center">
            <h4>Cabang</h4>
            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModal">Buka Cabang</button>
            <div class="modal" id="myModal">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h4 class="modal-title">Cabang</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                  </div>
                  <div class="modal-body">
                    <div class="row">
                      <div class="col-sm-6">
                        <button class="btn btn-primary" onclick="showImage()">Cabang 1</button>
                        <br>
                        <img src="../images/food.png" align="center"><br>
                        <p>50</p> 
                      </div>
                      <div class="col-sm-6" align="center">
                        <button class="btn btn-primary" onclick="showImage1()">Cabang 2</button>
                        <br>
                        <img src="../images/food.png" align="center"><br>
                        <p>100</p> 
                      </div>
                    </div>
                  </div>
                  <div class="modal-footer">
                  <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>
          </div>
          <div class="col-sm-12" align="center">
            <hr />
            <img id="mixue" src="../images/250.png" class="stretch-animation" onclick="gantiGambar()">
          </div>
          <div id="imageConatiner" align="center">
          <div class="row">
            <div class="col-sm-6 d-grid mx-auto">
              <img src="../images/252.png" id="myImage" style="display:none;">
            </div>
            <div class="col-sm-6 d-grid mx-auto">
              <img src="../images/253.png" id="myImage1" style="display:none;">
            </div>
          </div>
        </div>
	</div>
        </div>
	<div class="row">
        <div class="col-sm-12" align="center">
          <img id="mixue" src="images/250.png" class="stretch-animation" onclick="gantiGambar()">
        </div>
        <div class="col-sm-6">
          <img src="images/252.png" id="myImage" style="display:none;">
        </div>
        <div class="col-sm-6">
          <img src="images/253.png" id="myImage1" style="display:none;">
        </div>
      </div>
	<div class="row" align="center">
        <h4 align="center">Dagangan Terbaru Anda</h4>
        <div class="col-sm-4">
          <div id="da">
            <img src="../images/222.png"><br>
            <img src="../images/food.png" ><p>20</p>
            <button class="btn btn-primary" onclick="upgradeDagangan1()" >Bisnis Jualan Es Krim</button>
          </div>
          <img src="../images/222.png" style="display:none;" id="esk"><br>
          <button class="btn btn-primary" onclick="jualEs()" id="es" style="display:none;">Jual Es Krim</button>
        </div>
        <div class="col-sm-4">
          <div id="da1">
            <img src="../images/230.png"><br>
            <img src="../images/food.png"><p>100</p>
            <button class="btn btn-primary" onclick="upgradeDagangan2()" >Bisnis Jualan Minuman Boba</button>
          </div>
          <img src="../images/230.png" style="display:none;" id="boba"><br>
          <button class="btn btn-primary" onclick="jualBoba()" id="boba1" style="display:none;">Jual Minuman Boba</button>
        </div>
        <div class="col-sm-4">
          <img src="../images/229.png" style="display:block;">
          <img src="../images/food.png"><p>30000</p>
          <button class="btn btn-primary" onclick="confirmPurchase()">Beli Piala</button><br>
        </div>
      </div>
      </div>
    </div>
    <br>
    <footer>
      <div id="container-fluid mt-3" class="container" style="background-image: url('images/footer.png'); padding:20px; border-radius: 30px; color: white;">
      <div class="row mt-3 d-flex flex-md-row flex-column justify-content-between align-items-center text-center pt-3 pb-3 mx-auto">
          <div class="col-md-6 text-center mb-3 mb-md-0">
              <h5 class="fw-bold">Missyue Clicker</h5>
              <p>Created by Group 9</p>
              <p>&copy copyright 2023</p>
          </div>
          <div class="col-md-6 d-flex justify-content-center" style="background-color: aliceblue; border-radius: 10px; max-width: fit-content; width: 150px; ">
              <a href="https://www.umn.ac.id/?gclid=Cj0KCQjwz6ShBhCMARIsAH9A0qVQt97EhNy_s9RZUcjBO5DhdSBqRIu4afR-F624j4SQ2hUJ7KnAqnQaAhKlEALw_wcB"><img src="../images/logo-akreditasi.png" class="img-fluid"></a>
          </div>
      </div>
      </div>
  </footer>
    </div>
    </div>
    <script>

      var username = sessionStorage.getItem("username");
      if(username){
            document.getElementById("display-name").innerHTML = username;
      }else{
        alert("Maaf nama character anda tidak dimasukkan ! Anda tidak bisa melanjutkan ke halaman selanjutnya!");
              window.location.href = '../title/title.html';
      }

  function Clock() {
    var now = new Date();
    var hours = now.getHours();
    var minutes = now.getMinutes() < 10 ? "0" + now.getMinutes() : now.getMinutes();
    var seconds = now.getSeconds() < 10 ? "0" + now.getSeconds() : now.getSeconds();
    var timeString = hours + ":" + minutes + ":" + seconds;
    document.getElementById("clock").innerHTML = timeString;
  }

  setInterval(Clock, 1);

        var money = 0;
        var counter = 0;
        var counter1 = 0;
        var counter2 = 0;

        const progressBar = document.querySelector('#progress-bar .progress-bar');
        const levelText = document.querySelector('.level-text');

        let currentLevel = 1;
        let currentExp = 0;
        let maxExp = 100;

        function gameovercheck(){
          if(gameover==0){
            alert("Selamat anda memenangkan permainan ini");
            gameover++;
            setTimeout(function() {
              window.location.href = '../about/about.html';
            }, 3000);
				  }
			  }

        function confirmPurchase(){
          if(money >= 30000 && currentLevel >= 15){
            money -=30000;
            gameovercheck();
          }else if(money < 30000){
            alert("Not enough money.")
          }else {
            alert("Level terlalu rendah.");
          }
        }

        var gameover = 0;

        function updateLevel() {
          if (currentLevel < 30) {
            currentLevel++;
            currentExp = 0;
            maxExp = currentLevel * 100;
            levelText.textContent = `Level ${currentLevel}`;
          }   
        }

        function updateExp(amount) {
          if (currentLevel < 30) {
            currentExp += amount;
            if (currentExp >= maxExp) {
            updateLevel();
          }
          progressBar.style.width = `${(currentExp / maxExp) * 100}%`;
          }
        }


            function increaseMoney() {
                document.getElementById("MoneyValue").value = money;
                money += 1;
                updateExp(2);
                if (document.getElementById("myImage").style.display === "block" && document.getElementById("myImage1").style.display === "block") {
                    money += 7; 
                }else if (document.getElementById("myImage1").style.display === "block") {
                    money += 2; 
                }else if(document.getElementById("myImage").style.display === "block"){
                    money += 5;
                }
            }


        function upgradeDagangan1(){
            if (money >= 20 && counter2 <1){
                document.getElementById("es").style.display = "block";
                document.getElementById("esk").style.display = "block";
                document.getElementById("da").style.display = "none";
                money -= 20;
            } else if (money < 20){
                alert("Not enough money.");
            } else {
                alert("Already Purchased");
            }
        }

        function jualEs(){
            document.getElementById("MoneyValue").value = money;
            money +=3;
            updateExp(2);
        }

        function upgradeDagangan2(){
            if (money >= 100 && counter2 <1){
                document.getElementById("boba").style.display = "block";
                document.getElementById("boba1").style.display = "block";
                document.getElementById("da1").style.display = "none";
                money -= 100;
            } else if (money < 100){
                alert("Not enough money.");
            } else {
                alert("Already Purchased");
            }
        }

        function jualBoba(){
            document.getElementById("MoneyValue").value = money;
            money +=8;
            updateExp(2);
        }

        const button = document.getElementById("b");
        button.addEventListener("click", function() {
          if (money >= 5) {
            money-=5;
            var interval = setInterval(function() {
              increaseMoney();
            }, 100);
      
            button.disabled = true;
            setTimeout(function() {
              clearInterval(interval);
              button.disabled = false;
            }, 10000);
          } else {
            alert("Not enough money.");
          }
        });
      
        const ba = document.getElementById("c");
        ba.addEventListener("click", function() {
          if (money >= 50) {
            money-=50;
            var interval = setInterval(function() {
              increaseMoney();
            }, 100);
      
            ba.disabled = true;
            setTimeout(function() {
              clearInterval(interval);
              ba.disabled = false;
            }, 10000);
          } else {
            alert("Not enough money.");
          }
        });

        const bat = document.getElementById("h");
        bat.addEventListener("click", function() {
          if (money >= 500) {
            money-=500;
            var interval = setInterval(function() {
              increaseMoney();
            }, 1);
      
            bat.disabled = true;
            setTimeout(function() {
              clearInterval(interval);
              bat.disabled = false;
            }, 10000);
          } else {
            alert("Not enough money.");
          }
        });

        function showImage() {
          if (money >= 50 && counter < 1 && currentLevel >= 2) {
            document.getElementById("myImage").style.display = "block";
            money -= 50;
            increaseMoney();
            counter++;
          }else if (currentLevel< 2){
              alert("Level terlalu rendah !");
          } else if (counter === 1) {
            alert("Already sold out !");
            document.getElementById("myButton").disabled = true;
          } else {
            alert("Not enough money.");
          }
        }

        function showImage1() {
          if (money >= 100 && counter1 <1 && currentLevel >=3) {
            document.getElementById("myImage1").style.display = "block";
            money -= 100;
            increaseMoney();
            counter1++;
          }else if (currentLevel< 3){
            alert("Level terlalu rendah !");
          } else if (counter1 === 1) {
            alert("Already sold out !");
            document.getElementById("myButton").disabled = true;
          } else {
            alert("Not enough money.");
          }
        }

        const image = document.getElementById("mixue");
        image.addEventListener("click", increaseMoney);

        window.onclick = function(event) {
          var modal = document.getElementById("myModal");
          if (event.target == modal) {
            modal.style.display = "none";
          }
        }

        var music = document.getElementById("bg-music");
        var toogleMusic = document.getElementById("toogle-music");
        var volumeSlider = document.getElementById("volume-slider");

        music.volume = 0.5;
        toogleMusic.addEventListener("change", function(){
            if (toogleMusic.checked){
                music.play();
            }else{
                music.pause();
            }
        });

        volumeSlider.addEventListener("input", function(){
            music.volume = volumeSlider.value;
        });

        var gambarAsli = document.getElementById("mixue");
        var gambarBaru = "../homescreen/images/mixue_idle.png";
        var gambarLama = gambarAsli.src;
        
        gambarAsli.onclick = function() {
            if (gambarAsli.src == gambarLama) {
                gambarAsli.src = gambarBaru;
                setTimeout(function() {
                  gambarAsli.src = gambarLama;
                }, 300); 
              }
        }
      </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
